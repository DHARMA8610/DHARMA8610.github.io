<html>
    <header>
        <title>IMUSSA</title>
        <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    </header>
    <body>
        <div id="app">
            <p>
                问一个yes或no的问题：
                <input v-model="question">
            </p>
            <p>
                {{answer}}
            </p>
        </div>
        <script>
            const app = new Vue({
                el: '#app',
                data : {
                    question: '',
                    answer: '你还没有提问题，我不会回答的！'
                },
                watch: {
                    question: (newQuestion, oldQuestion) => {
                        this.answer = '等你输入完了，我再告诉你！'
                        this.debouncedGetAnswer()
                    }
                },
                created: {
                    this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)
                },
                methods: {
                    getAnswer: () => {
                        if(this.question.indexOf('?')===-1){
                            this.answer = '问题通常都是?结尾的 ;-)'
                            return
                        }
                        this.answer = '容我我想想啊'
                        var vm = this
                        axios.get('https://yesno.wtf/api')
                            .then((response) => {
                                vm.answer = _.capitalize(response.data.answer)
                            })
                            .catch((err) => {
                                vm.answer = '错误，无法访问这个API接口' + err
                            })
                    }
                }
            })
        </script>
    </body>
</html>
